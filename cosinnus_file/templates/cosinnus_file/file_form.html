{% extends "cosinnus_file/base.html" %}
{% load i18n cosinnus_tags %}
{% load static from staticfiles %}
{% load bootstrap3 %}
{% block page_title %}File{% endblock %}

{% block extrahead %}
<link rel="stylesheet" href="{% static 'css/vendor/jquery-ui-autocomplete.min.css' %}">
{% endblock %}

{% block breadcrumbs %}
    {{ block.super }}
    {% if object %}
        <li><a href="{% url 'cosinnus:file:file' group=group.slug slug=object.slug %}">{{ object.name }}</a> <span class="divider">/</span></li>
        {% if form_view == 'update' %}
            <li class="active">{% trans "Upload" %}</li>
        {% elif form_view == 'delete' %}
            <li class="active">{% trans "Delete" %}</li>
        {% endif %}
    {% else %}
        <li class="active">{% trans "Upload file" %}</li>
    {% endif %}
{% endblock %}

{% block subnav_add_right %}{% endblock %}

{% block content %}
<form enctype="multipart/form-data" action="." method="post" class="form-horizontal">
    {% csrf_token %}
    <fieldset>
        {% bootstrap_form form %}

	        {% if form_view == 'create' %}
	            {% trans "Upload" as submitbtn_caption %}
	        {% elif form_view == 'update' %}
	            {% trans "Save" context "sinn" as submitbtn_caption %}
	        {% elif form_view == 'delete' %}
	            {% trans "Delete" as submitbtn_caption %}
	            {% trans "Are you sure to remove this file?" as question %}
	        {% endif %}
		
        <div class="control-group">
            {% if question %}
                <label class="control-label">{{ question }}</label>
            {% endif %}
            <div class="controls">
                <button type="submit" class="btn {{ btnclass }}">{{ submitbtn_caption }}</button>
                <a href="{% url 'cosinnus:file:list' group=group.slug %}" class="btn">{% trans "Cancel" %}</a>
            </div>
        </div>
    </fieldset>
</form>
{% endblock %}

{% block extrafooter %}
{{ block.super }}
<script type="text/javascript" src="{% static "js/vendor/jquery-ui-autocomplete.min.js" %}"></script>
<script type="text/javascript">
var availableTags = [
    {% for tag in tags %}
        "{{ tag }}",
    {% endfor %}
];
</script>
<script type="text/javascript" src="{% static "js/vendor/jquery.ui.autocomplete-tags.js" %}"></script>
{% endblock %}
